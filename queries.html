<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="scala-stellar-sdk">
<meta name="generator" content="Paradox, paradox-material-theme=0.5.1, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="">


<meta name="description" content="scala-stellar-sdk">
<link rel="shortcut icon" href="assets/images/favicon.png">
<title>Queries Â· Stellar SDK for Scala</title>
<link rel="stylesheet" href="assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="lib/prettify/prettify.css">
<script src="assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="assets/fonts/font-awesome.css">
<link rel="stylesheet" href="assets/fonts/material-icons.css">
<link rel="stylesheet" href="assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="index.html" title="Stellar SDK for Scala" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Stellar SDK for Scala
</span>
<span class="md-header-nav__topic">
Queries
</span>
</div>
</div>
<form name="search" style="display: none">
<input type="text" name="query">
</form>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/synesso/scala-stellar-sdk"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
synesso/scala-stellar-sdk
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="index.html" title="Stellar SDK for Scala" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
<a href="index.html" title="Stellar SDK for Scala">
Stellar SDK for Scala
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/synesso/scala-stellar-sdk"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
synesso/scala-stellar-sdk
</div>
</a>

</div>
<ul>
  <li><a href="transacting.html" class="page">Transacting</a></li>
  <li><a href="queries.html" class="active page">Queries</a></li>
  <li><a href="sources.html" class="page">Sources</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="queries.html#queries" class="header">Queries</a>
  <ul>
    <li><a href="queries.html#accounts" class="header">Accounts</a></li>
    <li><a href="queries.html#assets" class="header">Assets</a></li>
    <li><a href="queries.html#effects" class="header">Effects</a></li>
    <li><a href="queries.html#ledgers" class="header">Ledgers</a></li>
    <li><a href="queries.html#offers" class="header">Offers</a></li>
    <li><a href="queries.html#operations" class="header">Operations</a></li>
    <li><a href="queries.html#orderbook" class="header">OrderBook</a></li>
    <li><a href="queries.html#payments" class="header">Payments</a></li>
    <li><a href="queries.html#trades" class="header">Trades</a></li>
    <li><a href="queries.html#transactions" class="header">Transactions</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.4.0
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="queries.html#queries" class="header">Queries</a>
  <ul>
    <li><a href="queries.html#accounts" class="header">Accounts</a></li>
    <li><a href="queries.html#assets" class="header">Assets</a></li>
    <li><a href="queries.html#effects" class="header">Effects</a></li>
    <li><a href="queries.html#ledgers" class="header">Ledgers</a></li>
    <li><a href="queries.html#offers" class="header">Offers</a></li>
    <li><a href="queries.html#operations" class="header">Operations</a></li>
    <li><a href="queries.html#orderbook" class="header">OrderBook</a></li>
    <li><a href="queries.html#payments" class="header">Payments</a></li>
    <li><a href="queries.html#trades" class="header">Trades</a></li>
    <li><a href="queries.html#transactions" class="header">Transactions</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#queries" name="queries" class="anchor"><span class="anchor-link"></span></a>Queries</h1>
<p>A convenient HTTP API for accessing Stellar is provided by the Stellar Development Foundation (SDF) through a component called <a href="https://www.stellar.org/developers/reference/">Horizon</a>. The Scala Stellar SDK provides access to these endpoints via methods on the <a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/Network.html">Network</a> interface. These methods mirror the REST API provided by Horizon.</p>
<p>The SDF supports two main networks, the primary public network and another for testing. These are represented separately by the objects <a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/PublicNetwork$.html">PublicNetwork</a> and <a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/TestNetwork$.html">TestNetwork</a>.</p>
<blockquote>
  <p>If it is your use-case that you are deploying a separate, private Stellar network, then you can implement the <code>Network</code> trait to provide access to the Horizon endpoints on your network.</p>
</blockquote>
<p>Queries fall into several categories.</p>
<h3><a href="#accounts" name="accounts" class="anchor"><span class="anchor-link"></span></a>Accounts</h3>
<p><a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/resp/AccountResp.html">Account</a>s are the entities through which users can interact with the network. They are represented by a key pair. Account details can be found given an account&rsquo;s <a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/KeyPair.html">KeyPair</a> or <a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/PublicKey.html">PublicKey</a>.</p>
<pre class="prettyprint"><code class="language-scala">val accountId = &quot;GCXYKQF35XWATRB6AWDDV2Y322IFU2ACYYN5M2YB44IBWAIITQ4RYPXK&quot;
val publicKey = KeyPair.fromAccountId(accountId)

// account details
val accountDetails: Future[AccountResp] = TestNetwork.account(publicKey)

// account datum value
val accountData: Future[String] = TestNetwork.accountData(publicKey, &quot;data_key&quot;)</code></pre><a href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.4.0/src/test/scala/stellar/sdk/DocExamples.scala#L36-L43">Full source at GitHub</a>
<h3><a href="#assets" name="assets" class="anchor"><span class="anchor-link"></span></a>Assets</h3>
<p><a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/resp/AssetResp.html">Assets</a> are the items that are traded on the network. They can be searched for by their <code>code</code>, <code>issuer</code>, neither or both.</p>
<p>By default the results will be in ascending order from the earliest record. This behaviour can be modified with the <code>cursor</code> and <code>order</code> parameters.</p>
<pre class="prettyprint"><code class="language-scala">// stream of all assets from all issuers
val allAssets: Future[Stream[AssetResp]] = TestNetwork.assets()

// stream of the last 20 assets created
val last20Assets =
  TestNetwork.assets(cursor = Now, order = Desc).map(_.take(20))

// stream of assets with the code HUG
val hugAssets: Future[Stream[AssetResp]] = TestNetwork.assets(code = Some(&quot;HUG&quot;))

// stream of assets from the specified issuer
val issuerAssets: Future[Stream[AssetResp]] =
  TestNetwork.assets(issuer = Some(publicKey))

// Stream (of max length 1) of HUG assets from the issuer
val issuersHugAsset: Future[Stream[AssetResp]] =
  TestNetwork.assets(code = Some(&quot;HUG&quot;), issuer = Some(publicKey))</code></pre><a href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.4.0/src/test/scala/stellar/sdk/DocExamples.scala#L51-L67">Full source at GitHub</a>
<h3><a href="#effects" name="effects" class="anchor"><span class="anchor-link"></span></a>Effects</h3>
<p><a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/resp/EffectResp.html">Effects</a> are the changes that have been effected on the network as a result of operations successfully processed.</p>
<p>By default the results will be in ascending order from the earliest record. This behaviour can be modified with the <code>cursor</code> and <code>order</code> parameters.</p>
<pre class="prettyprint"><code class="language-scala">// stream of all effects
val allEffects: Future[Stream[EffectResp]] = TestNetwork.effects()

// stream of the last 20 effects
val last20Effects =
  TestNetwork.effects(cursor = Now, order = Desc).map(_.take(20))

// stream of effects related to a specific account
val effectsForAccount = TestNetwork.effectsByAccount(publicKey)

// stream of effects related to a specific transaction hash
val effectsForTxn: Future[Stream[EffectResp]] =
  TestNetwork.effectsByTransaction(&quot;f00cafe...&quot;)

// stream of effects related to a specific operation id
val effectsForOperationId: Future[Stream[EffectResp]] =
  TestNetwork.effectsByOperation(123L)

// stream of effects for a specific ledger
val effectsForLedger = TestNetwork.effectsByLedger(1234)</code></pre><a href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.4.0/src/test/scala/stellar/sdk/DocExamples.scala#L74-L93">Full source at GitHub</a>
<h3><a href="#ledgers" name="ledgers" class="anchor"><span class="anchor-link"></span></a>Ledgers</h3>
<p><a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/resp/LedgerResp.html">Ledgers</a> represent the state of the network at any time. They are created sequentially as the state of the network changes.</p>
<p>It is possible to stream all ledgers or query for a specific ledger by its sequential id. Each returned value provides meta-data about the changes in that ledger, as well as a summary of the network at that point of time.</p>
<p>By default the results will be in ascending order from the earliest record. This behaviour can be modified with the <code>cursor</code> and <code>order</code> parameters.</p>
<pre class="prettyprint"><code class="language-scala">// details of a specific ledger
val ledger: Future[LedgerResp] = TestNetwork.ledger(1234)

// stream of all ledgers
val ledgers: Future[Stream[LedgerResp]] = TestNetwork.ledgers()

// stream of the last 20 ledgers
val last20Ledgers =
  TestNetwork.ledgers(cursor = Now, order = Desc).map(_.take(20))</code></pre><a href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.4.0/src/test/scala/stellar/sdk/DocExamples.scala#L109-L117">Full source at GitHub</a>
<h3><a href="#offers" name="offers" class="anchor"><span class="anchor-link"></span></a>Offers</h3>
<p><a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/resp/OfferResp.html">Offers</a> can be issued by accounts to buy or sell assets. Querying for offers is available only by account. Additional offers are found by searching the <code>OrderBook</code>.</p>
<p>By default the results will be in ascending order from the earliest record. This behaviour can be modified with the <code>cursor</code> and <code>order</code> parameters.</p>
<pre class="prettyprint"><code class="language-scala">// all offers for a specified account
val offersByAccount: Future[Stream[OfferResp]] =
TestNetwork.offersByAccount(publicKey)

// most recent offers from a specified account
val last20Offers = TestNetwork
  .offersByAccount(publicKey, order = Desc, cursor = Now).map(_.take(20))</code></pre><a href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.4.0/src/test/scala/stellar/sdk/DocExamples.scala#L130-L136">Full source at GitHub</a>
<h3><a href="#operations" name="operations" class="anchor"><span class="anchor-link"></span></a>Operations</h3>
<p><a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/resp/Operation.html">Operations</a> are changes to the ledger. They represent the action, as opposed to the effects resulting from the action.</p>
<p>Operations returned by these queries are wrapped in the <a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/op/Transacted.html">Transacted</a> type. This indicates that the operation has been part of a successful transaction, and provides details about that transaction.</p>
<p>By default the results will be in ascending order from the earliest record. This behaviour can be modified with the <code>cursor</code> and <code>order</code> parameters.</p>
<p>There are several ways to search for and filter operations.</p>
<pre class="prettyprint"><code class="language-scala">// details of a specific operation
val operation: Future[Transacted[Operation]] = TestNetwork.operation(1234)

// stream of all operations
val operations: Future[Stream[Transacted[Operation]]] = TestNetwork.operations()

// stream of operations from a specified account
val opsForAccount: Future[Stream[Transacted[Operation]]] =
  TestNetwork.operationsByAccount(publicKey)

// stream of operations from a specified ledger
val opsForLedger: Future[Stream[Transacted[Operation]]] =
  TestNetwork.operationsByLedger(1234)

// stream of operations from a transaction specified by its hash
val opsForTxn: Future[Stream[Transacted[Operation]]] =
  TestNetwork.operationsByTransaction(&quot;f00cafe...&quot;)</code></pre><a href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.4.0/src/test/scala/stellar/sdk/DocExamples.scala#L148-L164">Full source at GitHub</a>
<h3><a href="#orderbook" name="orderbook" class="anchor"><span class="anchor-link"></span></a>OrderBook</h3>
<p><a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/OrderBook.html">OrderBooks</a> include all the offers to buy or sell a specific asset. They show the depth limited to the value of the <code>limit</code> param, which defaults to <code>20</code>.</p>
<pre class="prettyprint"><code class="language-scala">// the XLM/HUG orderbook with up to 20 offers
val hugOrderBook: Future[OrderBook] = TestNetwork.orderBook(
  selling = NativeAsset,
  buying = Asset(&quot;HUG&quot;, publicKey)
)

// the FabulousBeer/HUG orderbook with up to 100 offers
val beerForHugsBigOrderBook: Future[OrderBook] = TestNetwork.orderBook(
  selling = Asset(&quot;FabulousBeer&quot;, publicKey),
  buying = Asset(&quot;HUG&quot;, publicKey),
  limit = 100
)</code></pre><a href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.4.0/src/test/scala/stellar/sdk/DocExamples.scala#L180-L191">Full source at GitHub</a>
<h3><a href="#payments" name="payments" class="anchor"><span class="anchor-link"></span></a>Payments</h3>
<p><a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/op/PayOperation.html">Payments</a> are the subset of Operations that cause payments to be made to an account. This is similar to the <a href="#operations">Operations</a> query methods, but will only return <code>CreateAccount</code> and <code>Payment</code> operations.</p>
<p>By default the results will be in ascending order from the earliest record. This behaviour can be modified with the <code>cursor</code> and <code>order</code> parameters.</p>
<pre class="prettyprint"><code class="language-scala">// stream of all payment operations
val payments: Future[Stream[Transacted[PayOperation]]] = TestNetwork.payments()

// stream of payment operations involving a specified account
val accountPayments = TestNetwork.paymentsByAccount(publicKey)

// stream of payment operations in a specified ledger
val ledgerPayments = TestNetwork.paymentsByLedger(1234)

// stream of payment operations in a specified transaction
val transactionPayments = TestNetwork.paymentsByTransaction(&quot;bee042...&quot;)</code></pre><a href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.4.0/src/test/scala/stellar/sdk/DocExamples.scala#L205-L215">Full source at GitHub</a>
<h3><a href="#trades" name="trades" class="anchor"><span class="anchor-link"></span></a>Trades</h3>
<p><a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/Trade.html">Trades</a> are created when offers in an orderbook are partially or fully matched.</p>
<p>By default the results will be in ascending order from the earliest record. This behaviour can be modified with the <code>cursor</code> and <code>order</code> parameters.</p>
<pre class="prettyprint"><code class="language-scala">// stream of all trades
val trades: Future[Stream[Trade]] = TestNetwork.trades()

// stream of trades belonging to a specified orderbook
val orderBookTrades: Future[Stream[Trade]] = TestNetwork.tradesByOrderBook(
  base = NativeAsset,
  counter = Asset(&quot;HUG&quot;, publicKey)
)

// stream of trades that are created as a result of the specified offer
val offerBookTrades: Future[Stream[Trade]] = TestNetwork.tradesByOfferId(1234)</code></pre><a href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.4.0/src/test/scala/stellar/sdk/DocExamples.scala#L231-L241">Full source at GitHub</a>
<h3><a href="#transactions" name="transactions" class="anchor"><span class="anchor-link"></span></a>Transactions</h3>
<p>By default the results will be in ascending order from the earliest record. This behaviour can be modified with the <code>cursor</code> and <code>order</code> parameters.</p>
<p>Transactions are the fundamental unit of change in the network and are composed of at least one and at most 100 operations. These queries return validated transactions, in the form of <a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/resp/TransactionHistoryResp.html">TransactionHistoryResp</a>onses (as opposed to transactions that are composed and submitted to the network).</p>
<pre class="prettyprint"><code class="language-scala">// details of a specific transaction
val transaction: Future[TransactionHistoryResp] =
  TestNetwork.transaction(transactionIdString)

// stream of all transactions
val transactions: Future[Stream[TransactionHistoryResp]] =
TestNetwork.transactions()

// stream of transactions affecting the specified account
val accountTxns = TestNetwork.transactionsByAccount(publicKey)

// stream of transactions within the specified ledger
val ledgerTxns = TestNetwork.transactionsByLedger(1234)</code></pre><a href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.4.0/src/test/scala/stellar/sdk/DocExamples.scala#L250-L262">Full source at GitHub</a>
<p>Continue reading to learn how to subscribe and respond to future events via <a href="sources.html">Sources</a>.</p>
</div>
<div>
<a href="https://github.com/Synesso/scala-stellar-sdk/tree/master/src/main/paradox/queries.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.4.0
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="transacting.html" title="Transacting" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Transacting
</span>
</div>
</a>
<a href="sources.html" title="Sources" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Sources
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
<div class="md-footer-social">
<a href="https://github.com/synesso" class="md-footer-social__link fa fa-github"></a><a href="https://keybase.io/jem" class="md-footer-social__link fa fa-globe"></a>
</div>

</div>
</div>
</footer>

</div>
<script src="assets/javascripts/application.583bbe55.js"></script>
<script src="assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"."}})</script>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
