<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="Perform Stellar (distributed payments platform) operations from your Scala application. Build and submit transactions, query the state of the network and stream updates.">
<meta name="generator" content="Paradox, paradox-material-theme=0.6.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="">


<meta name="description" content="Perform Stellar (distributed payments platform) operations from your Scala application. Build and submit transactions, query the state of the network and stream updates.">
<link rel="shortcut icon" href="assets/images/favicon.png">
<title>Sources Â· Stellar SDK for Scala</title>
<link rel="stylesheet" href="assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="lib/prettify/prettify.css">
<script src="assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="assets/fonts/font-awesome.css">
<link rel="stylesheet" href="assets/fonts/material-icons.css">
<link rel="stylesheet" href="assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="index.html" title="Stellar SDK for Scala" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Stellar SDK for Scala
</span>
<span class="md-header-nav__topic">
Sources
</span>
</div>
</div>
<form name="search" style="display: none">
<input type="text" name="query">
</form>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/synesso/scala-stellar-sdk"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
synesso/scala-stellar-sdk
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="index.html" title="Stellar SDK for Scala" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
<a href="index.html" title="Stellar SDK for Scala">
Stellar SDK for Scala
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/synesso/scala-stellar-sdk"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
synesso/scala-stellar-sdk
</div>
</a>

</div>
<ul>
  <li><a href="transacting.html" class="page">Transacting</a></li>
  <li><a href="key_pairs.html" class="page">Key Pairs</a></li>
  <li><a href="queries.html" class="page">Queries</a></li>
  <li><a href="sources.html" class="active page">Sources</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="sources.html#sources" class="header">Sources</a>
  <ul>
    <li><a href="sources.html#effects" class="header">Effects</a></li>
    <li><a href="sources.html#ledgers" class="header">Ledgers</a></li>
    <li><a href="sources.html#offers" class="header">Offers</a></li>
    <li><a href="sources.html#operations" class="header">Operations</a></li>
    <li><a href="sources.html#orderbooks" class="header">OrderBooks</a></li>
    <li><a href="sources.html#payments" class="header">Payments</a></li>
    <li><a href="sources.html#transactions" class="header">Transactions</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.8.0
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="sources.html#sources" class="header">Sources</a>
  <ul>
    <li><a href="sources.html#effects" class="header">Effects</a></li>
    <li><a href="sources.html#ledgers" class="header">Ledgers</a></li>
    <li><a href="sources.html#offers" class="header">Offers</a></li>
    <li><a href="sources.html#operations" class="header">Operations</a></li>
    <li><a href="sources.html#orderbooks" class="header">OrderBooks</a></li>
    <li><a href="sources.html#payments" class="header">Payments</a></li>
    <li><a href="sources.html#transactions" class="header">Transactions</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#sources" name="sources" class="anchor"><span class="anchor-link"></span></a>Sources</h1>
<p>Many of the of the APIs made available via <a href="queries.html">Queries</a> are also available in a streaming mode. Access to the streaming endpoints is made available on the <a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/Network.html">Network</a> interface by way of <code>*Source</code> methods. Whereas queries provide access to historical data, sources can be used to subscribe to updates from the network in near real-time.</p>
<p><code>Sources</code> are a concept native to <a href="https://doc.akka.io/docs/akka/current/stream/stream-flows-and-basics.html#introduction">Akka Streams</a>. They provide resilient access to upstream data and support backpressure should the data be arriving faster than the application is capable of processing.</p>
<p>Before sources can be used, an actor system and materializer need to be brought into implicit scope.</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.8.0/src/test/scala/stellar/sdk/DocExamples.scala#L27-L29" target="_blank" title="Go to snippet source"></a><code class="language-scala">implicit val system = ActorSystem(&quot;stellar-sources&quot;)
implicit val materializer = ActorMaterializer()
import system.dispatcher</code></pre>
<p>Once done, sources may be used as a method for subscribing to updates. For example:</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.8.0/src/test/scala/stellar/sdk/DocExamples.scala#L305-L314" target="_blank" title="Go to snippet source"></a><code class="language-scala">// print each new transaction&#39;s hash
TestNetwork.transactionSource().runForeach(txn =&gt; println(txn.hash))

// a source of transactions for a given account
val accnTxnSource: Source[TransactionHistory, NotUsed] =
  TestNetwork.transactionsByAccountSource(publicKey)

// a source of transactions for ledger #3,
// started from the beginning of time to ensure we get everything
val ledgerTxnSource = TestNetwork.transactionsByLedgerSource(1, Record(0))</code></pre>
<p>Like queries, sources fall into several categories.</p>
<h3><a href="#effects" name="effects" class="anchor"><span class="anchor-link"></span></a>Effects</h3>
<p><a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/resp/EffectResp.html">Effects</a> are the changes that have been effected on the network as a result of operations successfully processed.</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.8.0/src/test/scala/stellar/sdk/DocExamples.scala#L99-L103" target="_blank" title="Go to snippet source"></a><code class="language-scala">// a source of all new effects
val effectsSource: Source[EffectResponse, NotUsed] = TestNetwork.effectsSource()

// a source of all new effects for a given account
val effectsForAccountSource = TestNetwork.effectsByAccountSource(publicKey)</code></pre>
<h3><a href="#ledgers" name="ledgers" class="anchor"><span class="anchor-link"></span></a>Ledgers</h3>
<p><a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/resp/LedgerResp.html">Ledgers</a> represent the state of the network at any time. They are created sequentially as the state of the network changes.</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.8.0/src/test/scala/stellar/sdk/DocExamples.scala#L145-L146" target="_blank" title="Go to snippet source"></a><code class="language-scala">// a source of all new ledgers
val ledgersSource: Source[LedgerResponse, NotUsed] = TestNetwork.ledgersSource()</code></pre>
<h3><a href="#offers" name="offers" class="anchor"><span class="anchor-link"></span></a>Offers</h3>
<p><a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/resp/OfferResp.html">Offers</a> can be issued by accounts to buy or sell assets. Sources for offers is available only by account.</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.8.0/src/test/scala/stellar/sdk/DocExamples.scala#L169-L170" target="_blank" title="Go to snippet source"></a><code class="language-scala">val offersByAccountSource: Source[OfferResponse, NotUsed] =
  TestNetwork.offersByAccountSource(publicKey)</code></pre>
<h3><a href="#operations" name="operations" class="anchor"><span class="anchor-link"></span></a>Operations</h3>
<p><a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/resp/Operation.html">Operations</a> are changes to the ledger. They represent the action, as opposed to the effects resulting from the action.</p>
<p>Operations returned by these queries are wrapped in the <a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/model/op/Transacted.html">Transacted</a> type. This indicates that the operation has been part of a successful transaction, and provides details about that transaction.</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.8.0/src/test/scala/stellar/sdk/DocExamples.scala#L196-L200" target="_blank" title="Go to snippet source"></a><code class="language-scala">// a source of all new operations
val operationsSource: Source[Transacted[Operation], NotUsed] = TestNetwork.operationsSource()

// a source of all new operations involving a specified account
val operationsByAccountSource = TestNetwork.operationsByAccountSource(publicKey)</code></pre>
<h3><a href="#orderbooks" name="orderbooks" class="anchor"><span class="anchor-link"></span></a>OrderBooks</h3>
<p><a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/OrderBook.html">OrderBooks</a> include all the offers to buy or sell a specific asset. The source for an orderbook will present offers for that pair.</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.8.0/src/test/scala/stellar/sdk/DocExamples.scala#L222-L226" target="_blank" title="Go to snippet source"></a><code class="language-scala">val beerForHugsBigOrderBookSource: Source[OrderBook, NotUsed] =
  TestNetwork.orderBookSource(
    selling = Asset(&quot;FabulousBeer&quot;, publicKey),
    buying = Asset(&quot;HUG&quot;, publicKey),
  )</code></pre>
<h3><a href="#payments" name="payments" class="anchor"><span class="anchor-link"></span></a>Payments</h3>
<p><a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/model/op/PayOperation.html">Payments</a> are the subset of Operations that cause payments to be made to an account. This is similar to the <a href="#operations">Operations</a> query methods, but will only return <code>CreateAccount</code> and <code>Payment</code> operations.</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.8.0/src/test/scala/stellar/sdk/DocExamples.scala#L246-L250" target="_blank" title="Go to snippet source"></a><code class="language-scala">// a source of all new payment operations
val paymentsSource: Source[Transacted[PayOperation], NotUsed] = TestNetwork.paymentsSource()

// a source of all new payment operations involving a specified account
val paymentsByAccountSource = TestNetwork.paymentsByAccountSource(publicKey)</code></pre>
<h3><a href="#transactions" name="transactions" class="anchor"><span class="anchor-link"></span></a>Transactions</h3>
<p>Transactions are the fundamental unit of change in the network and are composed of at least one and at most 100 operations. These sources stream validated transactions, in the form of <a href="https://synesso.github.io/scala-stellar-sdk/api/stellar/sdk/resp/TransactionHistory.html">TransactionHistory</a>onses (as opposed to transactions that are composed and submitted to the network).</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.8.0/src/test/scala/stellar/sdk/DocExamples.scala#L305-L314" target="_blank" title="Go to snippet source"></a><code class="language-scala">// print each new transaction&#39;s hash
TestNetwork.transactionSource().runForeach(txn =&gt; println(txn.hash))

// a source of transactions for a given account
val accnTxnSource: Source[TransactionHistory, NotUsed] =
  TestNetwork.transactionsByAccountSource(publicKey)

// a source of transactions for ledger #3,
// started from the beginning of time to ensure we get everything
val ledgerTxnSource = TestNetwork.transactionsByLedgerSource(1, Record(0))</code></pre>
</div>
<div>
<a href="https://github.com/Synesso/scala-stellar-sdk/tree/v0.8.0/src/main/paradox/sources.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.8.0
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="queries.html" title="Queries" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Queries
</span>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
<div class="md-footer-social">
<a href="https://github.com/synesso" class="md-footer-social__link fa fa-github"></a><a href="https://keybase.io/jem" class="md-footer-social__link fa fa-globe"></a>
</div>

</div>
</div>
</footer>

</div>
<script src="assets/javascripts/application.583bbe55.js"></script>
<script src="assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"."}})</script>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
